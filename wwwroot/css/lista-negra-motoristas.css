/* =========================================================
   Lista Negra de Motoristas - Solo consulta
   Prefijo de clases: lnm-*
   ========================================================= */

/* ---------------------------
   Banner
----------------------------*/
.lnm-banner{
  display:flex; align-items:center;
  background:#182A6E; color:#fff; padding:.5rem 1rem;
}
.lnm-banner h1{ margin:0; font-size:1.5rem; font-weight:700; }

/* ---------------------------
   Filtros
----------------------------*/
.lnm-filter-form label{ font-weight:600; }
.lnm-btn-filter{ background:#182A6E; border-color:#182A6E; }
.lnm-btn-filter:hover{ background:#182A6E; border-color:#182A6E; }

/* ---------------------------
   Tarjetas
----------------------------*/
.lnm-card{
  border:1px solid #ddd; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,.08);
  overflow:hidden; transition:transform .2s ease, box-shadow .2s ease; height:100%;
  background:#fff; position:relative;
}
.lnm-card:hover{ transform:translateY(-2px); box-shadow:0 8px 18px rgba(0,0,0,.12); }
.lnm-card-banner{
  text-align:center; background:#182A6E; color:#fff; font-weight:800; letter-spacing:1px;
  padding:.5rem 1rem; border-radius:10px; width:80%; margin:.8rem auto 0;
}
.lnm-card-body{ padding:1rem 1.25rem; }
.lnm-field-title{ font-size:.92rem; margin:.25rem 0 0; }
.lnm-field-value{ font-size:.9rem; color:#6b7280; margin:.1rem 0 .35rem; word-break:break-word; }
.lnm-sep{ border:2px solid #ff7300; margin:10px 0; }

.view-details-card-clickable{ cursor:pointer; transition:all .3s ease; }
.view-details-card-clickable:hover{ transform:translateY(-4px); box-shadow:0 12px 24px rgba(0,0,0,.15); }

/* ---------------------------
   Modales + Backdrops + Anti-desbordes
----------------------------*/
.modal{ overflow-x:hidden; overflow-y:auto; }
.modal-open .modal{ overflow-x:hidden; overflow-y:auto; }

.modal-backdrop{ z-index:1040; }
.modal-backdrop:not(.show){ display:none !important; }

#viewDetailsModal{ z-index:1050 !important; }
#evidenceModal{ z-index:1300 !important; }

.modal-backdrop.evidence-backdrop{ z-index:1290 !important; pointer-events:none; }
#evidenceModal.show ~ .modal-backdrop.evidence-backdrop{ pointer-events:auto; }

.lnm-modal-evidence{ max-width:80vw; width:min(80vw,700px); }
.lnm-modal-details{ max-width:80vw; width:min(80vw,900px); }

#viewDetailsModal .modal-content,
#evidenceModal .modal-content{
  display:flex; flex-direction:column; max-height:100dvh; max-height:100svh; overflow:hidden;
}
#viewDetailsModal .modal-header,
#evidenceModal .modal-header,
#viewDetailsModal .modal-footer,
#evidenceModal .modal-footer{ flex:0 0 auto; }
#viewDetailsModal .modal-body,
#evidenceModal .modal-body{ flex:1 1 auto; overflow:auto; -webkit-overflow-scrolling:touch; }

/* ---------------------------
   Modal de detalles - Layout
----------------------------*/
#viewDetailsModal .modal-header{
  background:#182A6E; color:#fff; border-bottom:none;
}
#viewDetailsModal .modal-header .close{ color:#fff; opacity:.8; }
#viewDetailsModal .modal-header .close:hover{ opacity:1; }

.details-layout{
  display:flex; height:70vh; max-height:500px; min-height:400px;
}
.details-left-panel{ flex:1; padding:1rem; overflow:auto; background:#fff; }
.separator{ width:3px; background:#ff7300; flex-shrink:0; margin:1rem 0; }
.details-right-panel{ flex:1; padding:1rem; overflow:auto; background:#fff; }

.section-title{
  font-size:1rem; font-weight:600; color:#182A6E;
  margin-bottom:1rem; padding-bottom:.5rem; border-bottom:2px solid #e9ecef;
}
.info-section{ margin-bottom:1rem; }
.info-label{ font-weight:600; color:#495057; font-size:.8rem; margin-bottom:.25rem; }

.description-text{
  background:#fff; border:1px solid #dee2e6; border-radius:6px; padding:.5rem;
  min-height:80px; color:#495057; font-size:.85rem; max-height:120px; overflow:auto; line-height:1.4;
}

/* Estado de la amonestación */
.penalty-status-card{ background:#fff; border:2px solid #e9ecef; border-radius:8px; padding:.5rem; }
.penalty-header{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:.75rem; padding-bottom:.5rem; border-bottom:1px solid #e9ecef;
}
.penalty-type{ font-weight:700; font-size:1rem; color:#182A6E; text-transform:uppercase; }
.penalty-countdown{
  font-weight:600; font-size:.85rem; padding:.25rem .35rem; border-radius:6px; color:#fff;
  min-width:140px; text-align:center; background:#6c757d;
}
.penalty-countdown.active{ background:#FD7304; }
.penalty-countdown.warning{ background:#6c757d; }
.penalty-countdown.expired{ background:#6c757d; }
.penalty-countdown.permanent{ background:#6c757d; }

.penalty-dates{ display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin-bottom:.75rem; }
.penalty-date-item{ display:flex; flex-direction:column; }
.date-label{ font-weight:600; color:#495057; font-size:.8rem; margin-bottom:.25rem; }
.date-value{ color:#6c757d; font-size:.85rem; }

.penalty-observation{ margin-top:.75rem; }
.observation-text{
  background:#f8f9fa; border:1px solid #e9ecef; border-radius:4px; padding:.5rem;
  color:#495057; font-size:.8rem; line-height:1.3; max-height:60px; overflow:auto; margin-top:.5rem;
}

/* Evidencias en detalles */
.evidence-count{ font-size:.75rem; color:#6c757d; font-weight:normal; }
.evidence-grid{
  display:grid; grid-template-columns:repeat(auto-fill, minmax(80px,1fr));
  gap:.5rem; max-height:200px; overflow:auto; padding:.5rem;
  border:1px solid #e9ecef; border-radius:6px; background:#f8f9fa;
}
.evidence-thumbnail{
  position:relative; width:80px; height:80px; border-radius:6px; overflow:hidden;
  cursor:pointer; border:2px solid #dee2e6; transition:all .2s ease; background:#fff;
}
.evidence-thumbnail:hover{ border-color:#ff7300; transform:scale(1.05); }
.evidence-thumbnail img{ width:100%; height:100%; object-fit:cover; }
.evidence-thumbnail.video::after{
  content:'\f04b'; font-family:'Font Awesome 5 Free'; font-weight:900;
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  color:#fff; font-size:1.2rem; text-shadow:0 0 4px rgba(0,0,0,.8);
}

/* Form */
.form-label{ font-weight:600; color:#495057; margin-bottom:0.5rem; font-size:0.875rem; }
.form-control{ border-radius:6px; border:1px solid #ced4da; padding:0.5rem 0.75rem; font-size:0.875rem; }
.form-control:focus{ border-color:#182A6E; box-shadow:0 0 0 0.2rem rgba(24,42,110,0.25); }
.btn-primary{ background:#182A6E; border-color:#182A6E; }
.btn-primary:hover{ background:#182A6E; border-color:#182A6E; }

/* ---------------------------
   Filtros
----------------------------*/
.ln-filter-form label { font-weight: 600; }
.ln-btn-filter { background: #182A6E; border-color: #182A6E; }
.ln-btn-filter:hover { background: #182A6E; border-color: #182A6E; }

/* ---------------------------
   Historial (scroll horizontal en el contenedor)
----------------------------*/
.history-section{ flex:1; margin-bottom:1.5rem; }

.history-box{
  max-height:200px; overflow-y:auto; overflow-x:auto;
  border:1px solid #e9ecef; border-radius:8px; padding:2px; background:#f8f9fa;
  -webkit-overflow-scrolling:touch; position:relative;
}
.history-item{
  position:relative; margin-bottom:4px; padding:6px 12px; padding-left:22px;
  background:#fff; border-radius:6px; border:1px solid #e9ecef; box-shadow:0 1px 3px rgba(0,0,0,.1);
  width:max-content; min-width:100%;
}
.history-item::before{
  content:''; position:absolute; left:8px; top:50%; transform:translateY(-50%);
  width:8px; height:8px; border-radius:50%; background:#007bff; border:2px solid #fff; box-shadow:0 0 0 1px #007bff;
}
.history-item:last-child{ margin-bottom:0; }

.history-content{
  display:flex; align-items:center; gap:12px; font-size:.85rem; line-height:1.4;
  flex-wrap:nowrap; white-space:nowrap; overflow:visible;
}
.history-date,.history-reason,.history-user{ color:#6c757d; font-weight:500; white-space:nowrap; flex-shrink:0; }
.history-separator{ color:#dee2e6; font-weight:bold; flex-shrink:0; }

/* ---------------------------
   Paginación
----------------------------*/
.lnm-pagination{ user-select:none; }
.lnm-pagination a{ text-decoration:none; }
.lnm-pagination a.page-nav{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:8px; border:1px solid #182A6E; color:#182A6E;
  margin:0 .2rem; transition:all .15s ease;
}
.lnm-pagination a.page-nav:hover{ background:#182A6E; color:#fff; }
.lnm-pagination a.page-num{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:36px; height:36px; padding:0 .6rem; margin:0 .15rem; border-radius:8px;
  border:1px solid #182A6E; color:#182A6E; font-weight:600; transition:all .15s ease;
}
.lnm-pagination a.page-num:hover{ background:#182A6E; color:#fff; }
.lnm-pagination a.page-num.current{ background:#182A6E; color:#fff; }
.lnm-pagination .ellipsis{ padding:0 .4rem; color:#6b7280; font-weight:700; }
.lnm-pagination a.disabled{ opacity:.45; pointer-events:none; }
.lnm-pagination-controls{ border-top:1px solid #e5e7eb; padding-top:1.5rem; margin-top:2rem; }
.lnm-pagination-row{ min-height:40px; gap:1rem; }
.lnm-pagination-spacer{ flex:1; min-width:0; }
.lnm-page-size-selector{ flex:1; white-space:nowrap; display:flex; align-items:center; justify-content:flex-end; }
.lnm-page-size-selector label{ font-size:.8rem; color:#6c757d; font-weight:500; margin-bottom:0; margin-right:.5rem; }
.lnm-page-size-selector select{ font-size:.875rem; padding:.25rem .5rem; border:1px solid #ced4da; border-radius:4px; background:#fff; min-width:70px; width:auto; }

/* ---------------------------
   Modal visor de evidencias (base)
----------------------------*/
#evidenceModal .modal-content{ background-color:rgba(0,0,0,0.1); border:none; }
#evidenceModal .modal-header{ border-bottom:1px solid #444; background-color:rgba(0,0,0,0.7); color:#fff; }
#evidenceModal .modal-header .close{ color:#fff; opacity:.8; }
#evidenceModal .modal-header .close:hover{ opacity:1; }

#evidenceModal .modal-body.lnm-viewer-body{
  padding:0; display:flex; justify-content:center; align-items:center;
  background-color:rgba(0,0,0,0.8); position:relative;
}

/* Contenido media */
#evidence-viewer-content{
  max-width:100%;
  max-height:calc(100dvh - 160px); max-height:calc(100svh - 160px);
  text-align:center; margin:auto;
}
#evidence-viewer-content img,
#evidence-viewer-content video{
  max-width:100%; width:auto; height:auto;
  max-height:calc(100dvh - 180px); max-height:calc(100svh - 180px);
  object-fit:contain;
}
#evidence-viewer-content audio{ width:100%; margin-top:30%; }

/* Controles */
.lnm-file-controls{
  position:absolute; top:50%; left:0; right:0; display:flex; justify-content:space-between; align-items:center;
  z-index:1310; padding:0 10px; transform:translateY(-50%);
}
.lnm-file-controls .btn{
  background-color:rgba(0,0,0,0.5); border:none; border-radius:50%;
  width:50px; height:50px; display:flex; justify-content:center; align-items:center;
  transition:all .3s ease; box-shadow:0 2px 10px rgba(0,0,0,.3);
}
.lnm-file-controls .btn:hover{ background-color:rgba(0,0,0,0.8); transform:scale(1.1); }
.lnm-file-controls .btn i{ color:#fff; font-size:20px; }
.lnm-file-controls .btn:disabled{ background-color:rgba(0,0,0,0.3); cursor:not-allowed; transform:none; }

#lnm-counter{
  position:absolute; bottom:15px; right:20px; background:rgba(0,0,0,.8); color:#fff;
  padding:6px 12px; border-radius:12px; font-size:13px; font-weight:600; z-index:1305;
  backdrop-filter:blur(4px); box-shadow:0 2px 10px rgba(0,0,0,.3);
}

/* Loading / error */
.media-loading{
  display:inline-block; width:40px; height:40px; border:3px solid rgba(255,255,255,.3);
  border-radius:50%; border-top-color:#fff; animation:spin 1s ease-in-out infinite;
}
.media-error{
  color:#fff; text-align:center; padding:2rem; background:rgba(0,0,0,.5);
  border-radius:8px; font-size:.9rem;
}
.media-error i{ font-size:2rem; margin-bottom:1rem; display:block; opacity:.7; }
@keyframes spin{ to{ transform:rotate(360deg); } }

/* ---------------------------
   Responsive (desktop → centrado / ≤992px → FULLSCREEN)
----------------------------*/
@media (max-width:1200px){
  .lnm-modal-evidence{ width:85vw; max-width:650px; }
  .lnm-modal-details{ width:80vw; max-width:1100px; }
  #evidence-viewer-content{ height:60vh; max-height:500px; min-height:280px; }
}
@media (max-width:992px){
  /* FULLSCREEN para el modal de evidencias en móviles y tablets */
  #evidenceModal .modal-dialog.lnm-modal-evidence{
    margin:0 !important; max-width:none !important;
    width:100vw !important; height:100dvh; height:100svh;
  }
  #evidenceModal .modal-content{
    height:100%; border-radius:0; display:flex; flex-direction:column; overflow:hidden;
  }
  #evidenceModal .modal-body{ flex:1 1 auto; overflow:hidden; }
  #evidenceModal .lnm-viewer-body{ align-items:center; justify-content:center; }
  /* Ajustar máximos del media para pantalla completa */
  #evidence-viewer-content,
  #evidence-viewer-content img,
  #evidence-viewer-content video{
    max-height:calc(100dvh - 120px); max-height:calc(100svh - 120px);
  }

  .details-layout{ flex-direction:column; height:auto; max-height:none; }
  .details-left-panel{ border-right:none; padding:1rem; overflow:visible; }
  .details-right-panel{ padding:1rem; overflow:visible; }
  .penalty-dates{ grid-template-columns:1fr; gap:.75rem; }
  .evidence-grid{ grid-template-columns:repeat(auto-fill, minmax(70px,1fr)); max-height:150px; }
  .evidence-thumbnail{ width:70px; height:70px; }
}
@media (max-width:768px){
  .lnm-banner h1{ font-size:1.2rem; }
  .lnm-card-banner{ width:90%; }
  .lnm-pagination-row{ gap:1rem; }
  .lnm-page-size-selector{ justify-content:center; }
  .lnm-modal-details{ max-width:80vw; margin:.5rem; }
  .lnm-file-controls .btn{ width:45px; height:45px; }
  .lnm-file-controls .btn i{ font-size:16px; }
  #evidence-viewer-content{ height:55vh; max-height:450px; }
  .evidence-thumbnail{ width:60px; height:60px; }
  .details-left-panel, .details-right-panel{ padding:.75rem; }
  .details-layout{ height:60vh; min-height:400px; }
}
@media (max-width:576px){
  /* Fullscreen ya aplicado en ≤992px; aquí afinamos paddings */
  #viewDetailsModal .modal-dialog.lnm-modal-details{
    margin:0; max-width:none; width:100vw; height:100dvh; height:100svh;
  }
  #viewDetailsModal .modal-content{ height:100%; border-radius:0; }
  #viewDetailsModal .modal-body{ max-height:none; padding:.75rem; }

  .lnm-pagination a.page-nav, .lnm-pagination a.page-num{
    width:32px; min-width:32px; height:32px; border-radius:6px; font-size:.875rem;
  }
  .lnm-pagination .ellipsis{ padding:0 .2rem; }
  .lnm-page-size-selector label{ font-size:.75rem; }
  .lnm-page-size-selector select{ font-size:.8rem; padding:.2rem .4rem; min-width:60px; }

  .evidence-thumbnail{ width:50px; height:50px; }
  .date-label{ font-size:.75rem; }
  .date-value{ font-size:.8rem; }
  .btn{ font-size:.8rem; padding:.4rem .8rem; }
  .details-left-panel, .details-right-panel{ padding:.5rem; }
  .section-title{ font-size:.9rem; }
  .evidence-grid{ grid-template-columns:repeat(auto-fill, minmax(50px,1fr)); max-height:120px; }
  .penalty-countdown{ font-size:.75rem; min-width:120px; }
}

/* Seguridad extra: diálogo no más alto que el viewport */
#viewDetailsModal .modal-dialog,
#evidenceModal .modal-dialog{ max-height:100dvh; max-height:100svh; }

/* ---------------------------
   Print
----------------------------*/
@media print{
  .lnm-pagination-controls, .lnm-filter-form, #evidenceModal, #viewDetailsModal{ display:none !important; }
  .lnm-card{ break-inside:avoid; box-shadow:none; border:1px solid #000; }
  .lnm-card-banner{ background:#000 !important; color:#fff !important; }
}

/* ---------------------------
   Utilidades
----------------------------*/
.text-truncate-custom{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.shadow-custom{ box-shadow:0 4px 6px rgba(0,0,0,.1); }
.border-custom{ border:1px solid #dee2e6; }
.rounded-custom{ border-radius:8px; }

@keyframes lnm-fadeIn{ from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
.lnm-animate-fade-in{ animation:lnm-fadeIn .3s ease-out; }

/* ---------------------------
   Multimedia
----------------------------*/
#evidence-viewer-content video{ outline:none; }
#evidence-viewer-content img{
  user-select:none;
  -webkit-user-drag:none; -khtml-user-drag:none; -moz-user-drag:none; -o-user-drag:none;
}